<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íƒœê·¸ì˜¤ë” - ì •í†µ ì¶©ë¶ëŒ€ì§€ì </title>
  <link rel="stylesheet" href="for_menu_modify.css">
</head>
<body>
  <header class="header">
    <div class="top-bar">
    </div>
    <div class="store-info">
      <!--<button class="back-btn">â†</button>ì´ê±° ì–´ë””ì“¸ë§Œí•˜ì§€ì•Šì„ê¹Œ-->
      <h1>ì •ë³´í†µì‹ ê³µí•™ë¶€ ì¶©ë¶ëŒ€ ì§€ì </h1>
      <div class="header-icons">
        <button>ğŸ”—</button>
        <button>ğŸ”</button>
        <button>ğŸ›’</button>
      </div>
    </div>
  </header>

  <nav class="menu-tabs">
    <button>ë©”ë‰´ ì°¾ê¸°</button>
    <button class="active">ì¶”ì²œ ë©”ë‰´</button>
    <button>ì‹ ë©”ë‰´</button>
    <button>bhc ì„¸íŠ¸</button>
    <button>ë¿Œë§í´</button>
    <p>ë²„íŠ¼ì€ ì•„ì§ ì‘ë™ x</p>
  </nav>

  <main class="menu-list">
    <section class="menu-item">
      <div class="menu-info">
        <% items.forEach(item => { %>
          <!--<div class="menu-container" onclick="openModal(<%= item.id %>, '<%= item.name %>', '<%= item.price %>', '<%= item.description %>')">-->
           <div class="menu-container" alt="ì›ë˜ ìœ„ ë‚´ìš©ì´ ì—¬ê¸°ì— ë“¤ì–´ê°ˆê±´ë° ì¼ë‹¨ ë¹¼ë†“ì„ê²Œ">
            <div class="menu-details">
            <h2><%= item.name %></h2>
            <p class="price"><%= item.price %>ì›</p>
            <p class="review"><%= item.description %></p>
            <form class="moding_menu_button_label" action = '/admin_addel' method="POST" onsubmit="event.preventDefault(); openConfirmModal(this);">
                    <input type="hidden" name="id" value="<%= item.id %>">
                    <button class="moding_menu_button" type="submit">ì‚­ì œ</button>
            </form>
          </div>
            <img class="menu-img" src="/test_img_upload/<%= item.image_url %>" alt="<%= item.name %>">
          </div>
        <% }) %>
      </div>
          <button class="confirm_menu_add" onclick="openAddMenuModal()"> ë©”ë‰´ ì¶”ê°€í•˜ê¸° </button>
    </section>

  <!--ë©”ë‰´ ì¶”ê°€ ì„¹ì…˜ : ì´ë¦„,ê°€ê²©,ì„¤ëª…,ì´ë¯¸ì§€ ìˆœìœ¼ë¡œ í•˜ë‚˜ì”© ëª¨ë‹¬ì´ ë‚˜ì˜¤ê²Œë” ì„¤ì •í•  ê±°ì•¼-->
   <div id="menu_add_section" class="menu-add-step">
       <section>
           <div id="menu-add-name" class="menu-add-modal">
               <span class="close" onclick="closeAddMenuModal()">&times;</span>
               <h2>ë©”ë‰´ ì¶”ê°€ - ì²«ë²ˆì§¸!</h2><br>
               <h3>ì¶”ê°€í•  ë©”ë‰´ì˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!</h3>
               <input type="text" id="menu-add-name-textarea" name="name" required><br>
               <button onclick="step2AddmMenuModal()">ë‹¤ìŒ</button>
           </div>
       </section>
        <section>
            <div id="menu-add-price" class="menu-add-step">
                <span class="close" onclick="closeAddMenuModal()">&times;</span>
                <h2>ë©”ë‰´ ì¶”ê°€ - ë‘ë²ˆì§¸!</h2><br>
                <h3>ë©”ë‰´ì˜ ê°€ê²©ì„ ì •í•´ì£¼ì„¸ìš”!</h3>
                <input type="text" id="menu-add-price-textarea" price="price" required><br>
                <button onclick="step3AddmMenuModal()">ë‹¤ìŒ</button>
            </div>
        </section>

        <section>
            <div id="menu-add-description" class="menu-add-step">
                 <span class="close" onclick="closeAddMenuModal()">&times;</span>
                 <h2>ë©”ë‰´ ì¶”ê°€ - ì„¸ë²ˆì§¸!</h2><br>
                 <h3>ì†ë‹˜ë“¤ì—ê²Œ ë©”ë‰´ì˜ ì„¤ëª…ì´ í•„ìš”í•´ìš”!</h3>
                 <input type="text" id="menu-add-description-textarea" description="description" required><br>
                 <button onclick="step4AddmMenuModal()">ë‹¤ìŒ</button>
            </div>
        </section>

        <section>
          <div id="menu-add-imgupload" class="menu-add-step">
               <span class="close" onclick="closeAddMenuModal()">&times;</span>
               <h1>ë©”ë‰´ ì¶”ê°€ - ë§ˆì§€ë§‰!</h1><br>
               <h2>ë§ˆì§€ë§‰ìœ¼ë¡œ ë©”ë‰´ë¥¼ ë©‹ì§„ ì‚¬ì§„ìœ¼ë¡œ ê¾¸ë©°ë³¼ê¹Œìš”?</h2><br>
               <form id="imge_UploadForm" action="/Storeimg_upload" method="POST" enctype="multipart/form-data">
                   <input type="file" name="myFile" />
                   <button type="submit">Upload</button>
               </form>
          </div>
        </section>
   </div>

   <!--ì‚­ì œ í™•ì¸ ëª¨ë‹¬, ê´€ë ¨ ìŠ¤í¬ë¦½ í•¨ìˆ˜(openConfirmModal, closeConfirModal, confirmDelete)-->
    <section>
        <div id="confirmModal" class="confirm-modal">
          <div class="confirm-modal-content">
            <span class="close" onclick="closeConfirmModal()">&times;</span>
               <p>ì •ë§ë¡œ ì‚­ì œí•˜ê² ìŠµë‹ˆê¹Œ?</p>
               <div class="confirm-modal-buttons">
                 <button onclick="confirmDelete()">í™•ì¸</button>
                 <button onclick="closeConfirmModal()">ì·¨ì†Œ</button>
               </div>
          </div>
        </div>
    </section>

     <!--ëª¨ë‹¬ ê´€ë ¨ ì½”ë“œ-->
      <div id="myModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          <h2 id="modal-menu-name"></h2>
          <p id="modal-price"></p>
          <p id="modal-description"></p>
          <div id="modal-options"></div>
          <button onclick="DoSendOrder()">ì£¼ë¬¸ í•˜ê¸°</button>
        </div>
      </div>

  </main>


  <!--ëª¨ë‹¬ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸, ë‚˜ì¤‘ì— jsíŒŒì¼ë¡œ ë”°ë¡œ ë¹¼ë†“ì„ ê²ƒ-->
  <script>
    let addForm;
    /*ë©”ë‰´ ì¶”ê°€ ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜*/
    function openAddMenuModal() {
        document.getElementById('menu_add_section').style.display = 'block';
        document.getElementById('menu-add-name').style.display = 'block';
    }

    function step2AddmMenuModal() {
        document.getElementById('menu-add-name').style.display = 'none';
        document.getElementById('menu-add-price').style.display = 'block';
    }

    function step3AddmMenuModal() {
        document.getElementById('menu-add-price').style.display = 'none';
        document.getElementById('menu-add-description').style.display = 'block';
    }
    function step4AddmMenuModal() {
        document.getElementById('menu-add-description').style.display = 'none';
        document.getElementById('menu-add-imgupload').style.display = 'block';
    }
    function step5AddmMenuModal() {
        deleteForm.submit();
    }
    function closeAddMenuModal() {
        document.getElementById('menu_add_section').style.display = 'none';
        document.getElementById('menu-add-name').style.display = 'none';
        document.getElementById('menu-add-price').style.display = 'none';
        document.getElementById('menu-add-description').style.display = 'none';
        document.getElementById('menu-add-imgupload').style.display = 'none';
      }
    /*ê´€ë¦¬ì í˜ì´ì§€ì—ëŠ” ì¼ë‹¨ ëª¨ë‹¬ ìƒì„±, ë©”ë‰´ ì£¼ë¬¸ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¼ë‹¨ ì‚­ì œ, ì•„ì°¨í”¼ ìˆ˜ì •,ì‚­ì œê°€ ì£¼ëª©ì ì¸ë°*/
    let deleteForm;

     /*ì‚­ì œ í™•ì¸ ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜*/
      function openConfirmModal(form) {
        deleteForm = form;
        document.getElementById('confirmModal').style.display = 'block';
      }

      function closeConfirmModal() {
        document.getElementById('confirmModal').style.display = 'none';
      }

      function confirmDelete() {
        deleteForm.submit();
      }
</script>
</body>
</html>